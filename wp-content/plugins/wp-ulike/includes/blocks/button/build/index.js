(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,o=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.data,i=window.wp.components,a=window.wp.i18n,r=window.wp.serverSideRender;var s=e.n(r);const p=window.wp.element,c=window.wp.apiFetch;var u=e.n(c);const m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"wp-ulike/button","title":"WP ULike Button","category":"wp-ulike","icon":"heart","description":"Add like/dislike buttons to your posts with customizable styles and templates.","keywords":["like","rating","vote","engagement","feedback","button"],"textdomain":"wp-ulike","editorScript":"file:./build/index.js","editorStyle":"file:./build/index.css","attributes":{"for":{"type":"string","default":"post"},"itemId":{"type":"string","default":""},"useCurrentPostId":{"type":"boolean","default":true},"template":{"type":"string","default":""},"buttonType":{"type":"string","default":""}},"supports":{"html":false,"align":true,"className":true},"usesContext":["postId","commentId"]}');(0,o.getBlockType)(m.name)||(0,o.registerBlockType)(m.name,{...m,edit:({attributes:e,setAttributes:o,isSelected:r,clientId:c})=>{const m=(0,l.useBlockProps)(),{for:d,itemId:w,useCurrentPostId:b,template:y,buttonType:_}=e,[g,k]=(0,p.useState)([]),[f,h]=(0,p.useState)((0,a.__)("Use Settings Default","wp-ulike")),[x,E]=(0,p.useState)(!0),I=(0,n.useSelect)(e=>{if(!c)return!1;const{getBlockParents:t,getBlockName:o}=e("core/block-editor");return t(c).some(e=>"core/comment-template"===o(e))},[c]),v=[{label:(0,a.__)("Post","wp-ulike"),value:"post"},{label:(0,a.__)("Comment","wp-ulike"),value:"comment"}];(0,p.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await u()({path:"/wp-ulike/v1/templates"});if(!e)return;t&&t.templates&&Array.isArray(t.templates)?(k(t.templates),t.default_template_name&&h(t.default_template_name)):t&&Array.isArray(t)&&k(t)}catch(t){e&&(console.error("Error fetching templates:",t),k([]))}finally{e&&E(!1)}})(),()=>{e=!1}},[]);const C=[{key:"",name:f,symbol:"",is_text_support:!0},...g],D=C.find(e=>e.key===y),S=!D||!1!==D.is_text_support,B=[{label:(0,a.__)("Default","wp-ulike"),value:""},{label:(0,a.__)("Image","wp-ulike"),value:"image"}];return S&&B.push({label:(0,a.__)("Text","wp-ulike"),value:"text"}),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(i.PanelBody,{title:(0,a.__)("Settings","wp-ulike"),initialOpen:!0},"comment"===d&&!I&&(0,t.createElement)("div",{style:{marginBottom:"20px"}},(0,t.createElement)(i.Notice,{status:"info",isDismissible:!1,className:"wp-ulike-comment-context-notice"},(0,a.__)("Comment buttons work best when placed inside a Comment Template block. They will automatically use the current comment ID.","wp-ulike"))),(0,t.createElement)(i.SelectControl,{label:(0,a.__)("Item Type","wp-ulike"),value:d,options:v,onChange:e=>o({for:e}),help:(0,a.__)("Select the type of content to add interactive like/dislike buttons to.","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,a.__)("Use Current Item ID","wp-ulike"),checked:b,onChange:e=>o({useCurrentPostId:e}),help:b?(0,a.__)("Automatically uses the current post or comment ID. You can optionally add a custom ID below to combine with it.","wp-ulike"):(0,a.__)("Disable to use a custom item ID instead of the current one.","wp-ulike"),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.TextControl,{label:(0,a.__)("Custom Item ID","wp-ulike"),value:w,onChange:e=>o({itemId:e}),help:b?(0,a.__)("Optional: Enter a number to combine with the current item ID. Example: If current ID is 42 and you enter 100, the final ID will be 42100. Useful for creating multiple interactive buttons on the same post. Note: Custom combined IDs will not appear in statistics/insights.","wp-ulike"):(0,a.__)("Enter a specific item ID to use. Leave empty to automatically detect the current item ID. Note: Custom IDs will not appear in statistics/insights.","wp-ulike"),type:"number",placeholder:b?(0,a.__)("Leave empty or enter number to combine","wp-ulike"):(0,a.__)("Enter item ID","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,t.createElement)("div",{className:"wp-ulike-template-selector",style:{marginBottom:"15px"}},(0,t.createElement)("label",{className:"components-base-control__label",style:{marginBottom:"8px",display:"block"}},(0,a.__)("Select a Template","wp-ulike")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(85px, 1fr))",gap:"6px",marginBottom:"8px"}},C.map(e=>{const l=y===e.key,n=!0===e.is_locked||"true"===e.is_locked||1===e.is_locked;return(0,t.createElement)("button",{key:e.key||"default",type:"button",onClick:()=>{n||o({template:e.key})},disabled:n,className:`wp-ulike-template-option ${l?"is-selected":""} ${n?"is-locked":""}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px 8px",border:"1.5px solid "+(l?"#0073aa":n?"#ccc":"#ddd"),borderRadius:"3px",background:n?"#f5f5f5":"#fff",cursor:n?"not-allowed":"pointer",transition:"border-color 0.15s ease",opacity:n?.6:1,position:"relative"},onMouseEnter:e=>{l||n||(e.currentTarget.style.borderColor="#bbb")},onMouseLeave:e=>{l||n||(e.currentTarget.style.borderColor="#ddd")},title:n?`${e.name} (${(0,a.__)("Pro Feature","wp-ulike")})`:e.name},(0,t.createElement)("div",{style:{width:"50px",height:"50px",marginBottom:"6px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}},e.symbol?(0,t.createElement)("img",{src:e.symbol,alt:e.name,style:{width:"50px",height:"50px",objectFit:"contain",filter:l?"brightness(40%) sepia(100%) hue-rotate(170deg) saturate(250%)":n?"grayscale(100%) opacity(0.5)":"none",transition:"filter 0.15s ease"}}):(0,t.createElement)(i.Icon,{icon:"admin-settings",size:32,style:{filter:l?"brightness(40%) sepia(100%) hue-rotate(170deg) saturate(250%)":n?"grayscale(100%) opacity(0.5)":"none",transition:"filter 0.15s ease",color:"#646970"}}),n&&(0,t.createElement)(i.Icon,{icon:"lock",size:16,style:{position:"absolute",top:"2px",right:"2px",color:"#d63638",background:"#fff",borderRadius:"50%",padding:"2px"}})),(0,t.createElement)("span",{style:{fontSize:"10px",textAlign:"center",color:l?"#0073aa":n?"#999":"#666",fontWeight:"400",lineHeight:"1.3",wordBreak:"break-word"}},e.name))}))),y&&!1!==S&&(0,t.createElement)(i.SelectControl,{label:(0,a.__)("Button Type","wp-ulike"),value:_,options:B,onChange:e=>o({buttonType:e}),help:(0,a.__)("Choose whether to display an image icon or text label.","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),(0,t.createElement)("div",{...m},(0,t.createElement)(s(),{block:"wp-ulike/button",attributes:e,LoadingResponsePlaceholder:()=>(0,t.createElement)("div",{style:{padding:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"60px"}},(0,t.createElement)(i.Spinner,null),(0,t.createElement)("span",{style:{color:"#757575",fontSize:"13px"}},(0,a.__)("Loading preview...","wp-ulike"))),ErrorResponsePlaceholder:()=>(0,t.createElement)("div",{style:{padding:"20px",textAlign:"center",color:"#cc1818",fontSize:"13px"}},(0,a.__)("Error loading WP ULike button preview.","wp-ulike"))})))},save:()=>null})})();